{% extends "mviewer_base.html" %}
{% load i18n %}
{% load bootstrap_tags %}
{% block title %} Metadato de Visualizador {% endblock %}

{% block head %}
  {{ block.super }}
<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css" />-->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/leaflet.esri.geocoder/2.1.0/esri-leaflet-geocoder.css">
<link rel="stylesheet" href="{{STATIC_URL}}idegeo/mviewer/css/dd.css" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/2.3.3/css/bootstrap-colorpicker.min.css" rel="stylesheet">

<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.js"></script>-->
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet-src.js"
  integrity="sha512-+ZaXMZ7sjFMiCigvm8WjllFy6g3aou3+GZngAtugLzrmPFKFK7yjSri0XnElvCTu/PrifAYQuxZTybAEkA8VOA=="
  crossorigin=""></script>
<script src="https://cdn.jsdelivr.net/leaflet.esri/2.0.0/esri-leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/leaflet.esri.geocoder/2.1.0/esri-leaflet-geocoder.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6ZJwb2cqgW1YXsmXGT1I-0ujia5UREAg&libraries=places" async defer></script>
<script src='https://unpkg.com/leaflet.gridlayer.googlemutant@latest/dist/Leaflet.GoogleMutant.js'></script>

{% endblock %}

{% block body_outer %}
<div id="page-header" class="content">
  <div class="container">
    <div class="titulo-blk-row">
      <div class="titulo-img blk-cell"><img src="{{STATIC_URL}}idegeo/carousel/images/ico11_capas.png" alt=""></div>
        <div class="titulo-txt blk-cell">
          <h2>Configuracion de Encabezado</h2>
        </div>
    </div>
  </div>
</div>
<div class="container">
	<div class="cont_meta">
		<div class="col-md-8" id="general">
			<form id="formulario" method="post" enctype="multipart/form-data" action="">{% csrf_token %}
				{{ form.media }}
				{{form|as_bootstrap}}
				<p><a href="{% url 'mviewer_list' %}" class="btn btn-primary">Regresar</a> <input type="submit" class="btn btn-primary pull-right" value="Guardar"></p></br>
			</form>
		</div>
	</div>
</div>
{% endblock %}
{% block extra_script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/2.3.3/js/bootstrap-colorpicker.min.js"></script>
<script type="text/javascript">
    $('#id_title_color').closest('div').addClass('input-group colorpicker-component')
    $('#id_title_color').closest('div').append("<span class='input-group-addon'><i></i></span>")
    $('#id_title_color').closest('div').attr('id', 'textColor')
    $('#textColor').colorpicker({});
    $('#id_header_color').closest('div').addClass('input-group colorpicker-component')
    $('#id_header_color').closest('div').append("<span class='input-group-addon'><i></i></span>")
    $('#id_header_color').closest('div').attr('id', 'backgroundColor')
    $('#backgroundColor').colorpicker({});
</script>
<script>
  {% if header %}
    document.getElementById("id_title").value = "{{header.mviewer.name|safe}}"
  {% else %}
    document.getElementById("id_title").value = "{{mviewer.name|safe}}"
  {% endif %}
</script>
{% endblock extra_script %}